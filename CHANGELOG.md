# 更新日志

本文档记录所有脚本的版本更新信息。

## EhSearchEnhancer（搜索增强脚本）

### v2.3.5 (2026-02-02)
- 🔧 **优化并发控制** - 发送下载、归档查询等功能，现已遵循设置中并发数和请求延迟的设定值。
- 📝 **优化UI标签和提示** - 调整网络请求相关设置名称，完善功能提示信息，优化查询归档信息时的显示逻辑。

### v2.3.1 (2026-02-01)
- 🔧 修复跨域权限提醒：添加`@connect *.hath.network`声明，消除Tampermonkey对hath.network子域名的重复权限提醒
- 🎨 导入/导出二级菜单现在优先向右展开

### v2.3.0 (2026-01-31)
- 🔧 修复磁链全选逻辑：全选现在按优先度排序选择第一个
- ✨ 新增导出选择（仅标题）功能：在复选框右键菜单中支持导出和导入仅画廊标题，方便通过文件名列表来批量勾选对应画廊。
- 🎨 优化归档下载时的预检机制：对下载链接进行HEAD请求验证可用性，避免导入下载软件时文件名识别错误。
- 🎨 优化Aria2按钮置灰：在"查询所选画廊归档信息"和"批量查询/归档"对话框中添加Aria2可用性检测，不可用时置灰并显示原因

### v2.2.1 (2026-01-20)
- 🔍 优化批量查询/归档：新增通过infohash匹配的逻辑，支持磁链和种链的交叉识别

### v2.2.0 (2026-01-20)
- ✨ 新增 Aria2（归档）选项，支持有种子的画廊直接发送到Aria2进行归档处理
- 🔄 优化数据同步机制：改为增量合并，修复多页面刷新时的数据丢失问题
- 📊 优化统计信息显示：使用Emoji和符号简化界面，所有信息通过悬停提示显示完整文字
- ⚡ 优化混合画廊发送下载：链接和归档处理改为并行执行。
- 🔄 优化同画廊含多个种子时的种子排序规则（综合评分高、压缩包格式优先）
- 🔄 优化多选逻辑：采用两层优先级过滤。
- 🔄 改进反选功能：改为"无条件反选"，不受复选框约束限制
- 🐛 修复复选框样式不统一问题

### v2.1.0 (2026-01-18)
- ⚡ 大幅优化数据保存性能，特别是批量操作场景
- 🔍 改进错误处理，数据库操作失败时会给出明确提示

### v2.0.2 (2026-01-15)
- 🔧 完全移除 LocalStorage 相关逻辑，数据仅通过 IndexedDB 管理
- 🐛 修复 IndexedDB 数据丢失问题：改进异步保存机制，确保数据完全写入
- 📢 优化导入流程：添加"导入中..."提示，增强用户体验
- 📊 改善"最近下载"菜单：按倒序排列，最新批次显示在顶部
- 🎨 修正菜单项中 emoji 与文字的对齐问题

**⚠️ 更新建议**：本版本修改了数据存储方式，建议更新前先通过"设置 → 导出设置"导出备份

### v2.0.1 (2026-01-13)
- 🐛 修复：收藏页面现在显示复选框，支持批量下载
- 📝 优化：更新功能说明和注意事项

### v2.0 (2026-01-12)
- ✨ 重大功能升级
- 🎨 UI优化和菜单重组
- 📋 添加完整功能说明系统
- ⚙️ 完善设置菜单
- 🔧 修复多项bug

### v1.0
- 初始版本
- 基础的多选和磁链显示功能

---

## AriaEh（Aria2下载助手）

### v1.3.1 (2026-01-20)
- 🔄 增加HTTP请求超时时间：从2000ms改为5000ms，提升网络不稳定情况下的可靠性
- 🐛 修复：归档时无法获取画廊名称的问题

### v1.3 (2026-01-13)
- 🔧 移除sleazyfork自动更新链接
- 🔗 更新项目主页和支持链接指向eh-enhancements

### v1.2
- ✨ 深度适配EhSearchEnhancer
- 🔧 修复了某些情况下获取不到压缩包名称的问题
- 🎨 优化菜单界面
- 📊 增强下载历史功能
- ⚙️ 完善配置系统

### 原始版本
- 原作者：[SchneeHertz](https://github.com/SchneeHertz)

---

## ExHentai Lanraragi Checker（Lanraragi检查脚本）

### v1.7.1 (2026-02-02)
- 🐛 **修复emoji编码错误** - 修复标题中含有emoji或特殊Unicode字符时导致的URIError崩溃

### v1.7.0 (2026-02-01)
- ✨ **优化搜索策略** - 改进三层搜索流程，提高匹配准确度和速度
- ⚠️ **增强网络错误处理** - 连接失败时显示⚠️图标，用户可点击重试
- 🎯 **新增页数验证机制** - 可设置页数容差范围，做为匹配条件之一
- 🚀 **性能提升** - 缩略图缓存优化，减少重复请求
- 🐛 **其它改动** - 默认设置禁用“深度搜索”功能；其它bug修复

### v1.6.1 (2026-01-18)
- 🔧 修改缓存清理逻辑：超过设置的"缓存有效期"的数据，每隔1天清理一次

### v1.6 (2026-01-18)
- 🔧 **修复作者白名单大小写敏感问题** - 白名单匹配现在大小写不敏感，支持任意大小写组合
- 🐛 **修复设置界面配置无法生效的问题** - 脚本现在优先使用设置界面中保存的 LRR 服务器地址和 API 密钥，而不是代码中的硬编码值

### v1.5 (修改版, 2026-01-13)
- 🔧 移除sleazyfork自动更新链接
- 🔗 更新项目主页和支持链接
- 📝 完善功能说明和配置文档
- ✨ 支持简繁体转换、深度搜索、缓存优化

### 原始版本
- 原项目：[Putarku/LANraragi-scripts](https://github.com/Putarku/LANraragi-scripts)

---

## 项目改动日志

### 2026-01-13
- 统一更新所有脚本元数据（homepage、supportURL）
- 创建集中的CHANGELOG.md管理所有版本信息
- 简化各脚本README结构，把更新日志移至CHANGELOG.md
- 创建统一的安装指南（installation-guide.md）

### 2026-01-12
- 发布eh-enhancements项目初始版本
- 包含EhSearchEnhancer v2.0、AriaEh v1.2、ExHentai Lanraragi Checker v1.5
- 清空项目Git历史，保留当前状态

---

## 版本对应表

| 脚本 | 当前版本 | 发布日期 | 状态 |
|------|--------|--------|------|
| EhSearchEnhancer | v2.3.5 | 2026-02-02 | ✅ 稳定 |
| AriaEh | v1.3.1 | 2026-01-20 | ✅ 稳定 |
| ExHentai Lanraragi Checker | v1.7.1 | 2026-02-02 | ✅ 稳定 |
